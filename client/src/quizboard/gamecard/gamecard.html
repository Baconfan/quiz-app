<div class="w-full mx-auto p-6 rounded-lg shadow-lg">
  @if(gamecard$ | async)
  {
    <div class="justify-center text-3xl text-primary">Karte bearbeiten - {{dataFromBoardComponent.categoryTitle}} {{dataFromBoardComponent.valueTitle}}</div>
    <form #editCardForm="ngForm" class="gap-4 w-full">
      <mat-dialog-content>
        <div class="w-full grid grid-flow-row grid-cols-3 gap-4">
          <div class="col-span-1"><label>Aufhängetitel</label></div>
          <div class="col-span-2"><input autocomplete="off" type="text" class="input w-full bg-green-100" name="eyecatcherTitle" [(ngModel)] = "gcard.eyecatcherTitle"></div>
          <div class="col-span-1"><label>Spielmodus</label></div>
          <div class="col-span-2">
            <select [(ngModel)]="gcard.gameMode" name="gameMode" class="select" (ngModelChange)="onGameModeChange($event)">
              <option disabled selected>Wähle einen Modus aus.</option>
              @for (mode of possibleGameModes; track $index)
              {
                <option [value]="mode.key">{{mode.label}}</option>
              }
            </select>
          </div>
          <div class="col-span-1"><label>Fragetext</label></div>
          <div class="col-span-2"><input autocomplete="off" type="text" class="input w-full bg-green-100" name="questionText" [(ngModel)] = "gcard.questionText"></div>

          <div class="col-span-1"><label>Hilfe für Spieler (opt.)</label></div>
          <div class="col-span-2"><input autocomplete="off" type="text" class="input w-full bg-green-100" name="optionalClue" [(ngModel)] = "gcard.optionalClue"></div>
          @if(
            gcard.gameMode === "guess1WordWithOnlyQuestion" ||
            gcard.gameMode === "guess1WordWithClues" ||
            gcard.gameMode === "guess1WordWithImages" ||
            gcard.gameMode === "guess1WordWithSounds"){
            @if(gcard.gameMode === "guess1WordWithImages"){
              <div class="col-span-1"><label>Bilder</label></div>
              <div class="col-span-2" style="display: flex; gap: 8px;">
                @for(imageItem of gcard.questionImages; track $index;){
                  <div class="image-wrapper">
                    <img [ngSrc]="imageItem.imageUrl" width="100" height="100" alt="Antwortbild"/>
                    <button class="delete-btn" (click)="deleteImage($index)">✖</button>
                  </div>
                }
              </div>
              <div class="col-span-1">
              </div>
              <div class="col-span-2">
                <app-image-upload (uploadFile)="onImageUpload($event)"/>
              </div>
            }
            <div class="col-span-1"><label>Richtige Antwort</label></div>
            <div class="col-span-2"><input autocomplete="off" type="text" class="input w-full bg-green-100" name="answer0" [(ngModel)] = "gcard.possibleAnswers.correctAnswers[0].textAnswer"></div>
            <div class="col-span-1"></div>
            <div class="col-span-2">
                <app-image-upload (uploadFile)="onImageUpload($event)"></app-image-upload>
            </div>
          }
          @if(gcard.gameMode === "guess1WordWithClues")
          {
            <div class="col-span-1"><label>Hinweise</label></div>
            @for(cl of gcard.clues; track $index; let clId = $index)
            {
              @if(clId == 0)
              {
                <div class="col-span-2"><input autocomplete="off" type="text" class="input w-full bg-green-100" name="clueText0" [(ngModel)] = "gcard.clues[0]"></div>
              } @else {
                <div class="col-span-1"></div>
                <div class="col-span-2"><input autocomplete="off" type="text" class="input w-full bg-green-100" name="clueText{{clId}}" [(ngModel)] = "gcard.clues[clId]"></div>
              }
            }
            <div class="col-span-1"></div>
            <div class="col-span-2"><input autocomplete="off" type="text" class="input w-full bg-green-100" name="clueText2" [(ngModel)] = "gcard.clues[2]"></div>
          }
          @if(gcard.gameMode === "multipleChoices1Word"){
            <div class="col-span-1"><label>Gesuchte Antwort</label></div>
            <div class="col-span-2"><input autocomplete="off" type="text" class="input w-full bg-green-100" name="answer0" [(ngModel)] = "gcard.possibleAnswers.correctAnswers[0].textAnswer"></div>
            <div class="col-span-1"><label>Restliche Antwortauswahl</label></div>
            <div class="col-span-2"><input autocomplete="off" type="text" class="input w-full bg-green-100" name="wronganswer0" [(ngModel)] = "gcard.possibleAnswers.wrongAnswers[0].textAnswer"></div>
            <div class="col-span-1"><label></label></div>
            <div class="col-span-2"><input autocomplete="off" type="text" class="input w-full bg-green-100" name="wronganswer1" [(ngModel)] = "gcard.possibleAnswers.wrongAnswers[1].textAnswer"></div>
            <div class="col-span-1"><label></label></div>
            <div class="col-span-2"><input autocomplete="off" type="text" class="input w-full bg-green-100" name="wronganswer2" [(ngModel)] = "gcard.possibleAnswers.wrongAnswers[2].textAnswer"></div>
          }
          @if(gcard.gameMode === "guessMultipleWords")
          {
            <div class="col-span-1"><label>Passende Begriffe</label></div>
            <div class="col-span-2"><textarea></textarea></div>
          }
        </div>

      </mat-dialog-content>
      <mat-dialog-actions align="end" class="space-x-4">
        <button mat-dialog-close type="button" class="btn bg-red-400">Abbrechen</button>
        <button class="btn bg-green-400" type="button" (click)="saveEdit(editCardForm)">Speichern</button>
      </mat-dialog-actions>
    </form>
  } @else {


  }

</div>
